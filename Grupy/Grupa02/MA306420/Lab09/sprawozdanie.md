1. Do automatycznego uruchamiania buildów na jenkinsie postanowiłem wykorzystać webhooki udostępniane przez githuba. Aby to osiągnąć do pliku docker-compose opisującego system kontenerów z jenkinsem dodałem kontener który uruchamia instancję programu tunelującego ngrok i udostępnia tunel do mojej instancji jenkinsa, aby github mógł wykonać do niego request w ramach webhooka, uruchamiając w ten sposób buildy. Zmieniłem również sekcję powiadamiającą w Jenkinsfile tak, aby wysyłała powiadomienie do autora ostatnich commitów a nie tylko do osoby uruchamiącej pipeline.
W jenkinsie dodałem dedykowanego użytkownika, w imieniu którego github miał uruchamiać buildy. Wygenerowałem osobisty token dostępu dla tego użytkownika. Następnie dodałem też build trigger do pipeline na jenkinsie, pozwalający uruchamiać ten build przez wykonanie requestu do odpowiedniego endpointa z podaniem skonfigurowanej wartości tokenu.
W ostatnim kroku dodałem webhook do mojego sforkowanego repozytorium z chatem na githubie. Po każdym pushu wykonywał on będzie request na podany mu publiczny adres jenkinsa, wygenerowany za pomocą ngroka.
2. Do jenkinsfile obecnego w repoztyorium z wybraną przeze mnie aplikacją dodałem stage "Deploy", który buduje obraz uruchomieniowy aplikacji na podstawie dockerfile zawartego w repozytorium, a następnie uruchamia kontener z aplikacją za pomocą docker-compose. O powodzeniu lub będzie w którymś z kroków pipeline użytkownik informowany jest za pomocą wiadomości email.
