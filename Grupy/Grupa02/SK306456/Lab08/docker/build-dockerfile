ARG SRC_PATH
ARG REPO_URL
ARG BRANCH

FROM ubuntu:focal
EXPOSE 3000

RUN apt-get update \
&& apt-get -y install \ 
curl gnupg ca-certificates \
git

RUN curl -fsSL https://deb.nodesource.com/setup_15.x | bash - \
&& apt-get install -y nodejs 

RUN git clone $REPO_URL --single-branch --branch ${BRANCH} \
&& npm install --prefix $SRC_PATH

# will automatically stop after 60 seconds 

CMD npm start --prefix $SRC_PATH & sleep 60