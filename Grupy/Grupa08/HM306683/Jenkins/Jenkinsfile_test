pipeline {
    agent any
    tools {nodejs "NodeJS"}
    stages {
        stage('Test') {
            steps {
            	echo 'Testing'
                sh 'npm test'
            }
        }
    }
    post {
    	always { 
            echo 'Test completed. Results sent as e-mail.'
        }
        success {
            emailext attachLog: true,
            	body: 'Test status: success',
            	subject: 'Pipeline test completed successfully',
            	to: 'jenkins3464@gmail.com'
        }
        failure {
            emailext attachLog: true,
            	body: 'Test status: failure',
            	subject: 'Pipeline test failed',
            	to: 'jenkins3464@gmail.com'
        }
    }
}

